---
name: git-workflow
description: |
  Git åˆ†æ”¯å‘½åèˆ‡å·¥ä½œæµç¨‹è¦ç¯„ã€‚

  âš ï¸ é—œéµè¦å‰‡ - å¿…é ˆéµå®ˆï¼š
  1. çµ•å°ä¸å¯ä»¥ç›´æ¥åœ¨ main åˆ†æ”¯ä¸Šé€²è¡Œä»»ä½•ä¿®æ”¹æˆ–æäº¤
  2. ä»»ä½•è®Šæ›´éƒ½å¿…é ˆå…ˆå»ºç«‹åŠŸèƒ½åˆ†æ”¯ï¼ˆæ ¼å¼ï¼š<type>/<name>/<description>ï¼‰
  3. å®Œæˆå¾Œé€é Pull Request åˆä½µ
  4. æœ¬æŠ€èƒ½é©ç”¨æ–¼æ‰€æœ‰æ¶‰åŠæª”æ¡ˆä¿®æ”¹ã€æ–°å¢åŠŸèƒ½ã€bug ä¿®å¾©çš„ä»»å‹™

  è§¸ç™¼æ™‚æ©Ÿï¼šä»»ä½•éœ€è¦ä¿®æ”¹å°ˆæ¡ˆæª”æ¡ˆçš„æ“ä½œï¼ˆåŒ…æ‹¬æ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤æª”æ¡ˆï¼‰éƒ½å¿…é ˆåƒè€ƒæ­¤è¦ç¯„ã€‚
license: MIT
compatibility: opencode
metadata:
  audience: developers
  workflow: git
  priority: critical
  auto-trigger: true
---

# âš ï¸ æ ¸å¿ƒè¦å‰‡ - é–‹å§‹ä»»ä½•å·¥ä½œå‰å¿…è®€

## ğŸš« çµ•å°ç¦æ­¢çš„æ“ä½œ

**åœ¨é–‹å§‹ä»»ä½•ç¨‹å¼ç¢¼ä¿®æ”¹å‰ï¼Œå¿…é ˆå…ˆæª¢æŸ¥ç›®å‰åˆ†æ”¯ï¼**

```bash
# æª¢æŸ¥ç›®å‰åˆ†æ”¯
git branch

# å¦‚æœåœ¨ main åˆ†æ”¯ï¼Œç«‹å³å»ºç«‹æ–°åˆ†æ”¯
git checkout -b <type>/<name>/<description>
```

### ç¦æ­¢æ¸…å–®

âŒ **çµ•å°ä¸å¯ä»¥ç›´æ¥åœ¨ main åˆ†æ”¯ä¸Šä¿®æ”¹æª”æ¡ˆ**  
âŒ ä¸å¯ä»¥åœ¨ main åˆ†æ”¯ä¸ŠåŸ·è¡Œ `git add`  
âŒ ä¸å¯ä»¥åœ¨ main åˆ†æ”¯ä¸ŠåŸ·è¡Œ `git commit`  
âŒ ä¸å¯ä»¥åœ¨ main åˆ†æ”¯ä¸Šç·¨è¼¯ã€æ–°å¢æˆ–åˆªé™¤ä»»ä½•æª”æ¡ˆ

### æ­£ç¢ºæµç¨‹

âœ… å…ˆç¢ºèªç›®å‰åœ¨ main åˆ†æ”¯  
âœ… å»ºç«‹æ–°çš„åŠŸèƒ½åˆ†æ”¯  
âœ… åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šé€²è¡Œä¿®æ”¹  
âœ… æäº¤åˆ°åŠŸèƒ½åˆ†æ”¯  
âœ… é€é Pull Request åˆä½µ

---

## æˆ‘çš„åŠŸèƒ½

- æä¾›æ¨™æº–åŒ–çš„ Git åˆ†æ”¯å‘½åè¦ç¯„
- ç¢ºä¿åˆ†æ”¯é¡å‹ã€é–‹ç™¼è€…åç¨±å’ŒåŠŸèƒ½æè¿°çš„ä¸€è‡´æ€§
- å”åŠ©åœ˜éšŠéµå¾ªæœ€ä½³çš„ Git å·¥ä½œæµç¨‹

## ä½•æ™‚ä½¿ç”¨æˆ‘

åœ¨ä»¥ä¸‹æƒ…æ³ä¸‹ä½¿ç”¨æ­¤æŠ€èƒ½ï¼š

- å»ºç«‹æ–°çš„ Git åˆ†æ”¯æ™‚
- éœ€è¦ç¢ºèªåˆ†æ”¯å‘½åæ˜¯å¦ç¬¦åˆè¦ç¯„
- åœ˜éšŠå”ä½œéœ€è¦çµ±ä¸€çš„åˆ†æ”¯ç®¡ç†ç­–ç•¥
- é€²è¡Œ code review æ™‚æª¢æŸ¥åˆ†æ”¯å‘½å

## åˆ†æ”¯å‘½åè¦ç¯„

### æ¨™æº–æ ¼å¼

```
<type>/<developer-name>/<feature-description>
```

### åˆ†æ”¯é¡å‹ (type)

- **feat**: æ–°åŠŸèƒ½é–‹ç™¼
  - ä¾‹å¦‚: `feat/lip/user-authentication`
  - ç”¨æ–¼: é–‹ç™¼å…¨æ–°çš„åŠŸèƒ½æˆ–ç‰¹æ€§

- **fix**: éŒ¯èª¤ä¿®å¾©
  - ä¾‹å¦‚: `fix/lip/login-button-error`
  - ç”¨æ–¼: ä¿®å¾©ç¾æœ‰åŠŸèƒ½çš„ bug

- **refactor**: ç¨‹å¼ç¢¼é‡æ§‹
  - ä¾‹å¦‚: `refactor/lip/optimize-state-management`
  - ç”¨æ–¼: æ”¹å–„ç¨‹å¼ç¢¼çµæ§‹ï¼Œä½†ä¸æ”¹è®ŠåŠŸèƒ½

- **docs**: æ–‡ä»¶æ›´æ–°
  - ä¾‹å¦‚: `docs/lip/update-readme`
  - ç”¨æ–¼: æ›´æ–°å°ˆæ¡ˆæ–‡ä»¶ã€READMEã€è¨»è§£ç­‰

- **style**: æ¨£å¼èª¿æ•´
  - ä¾‹å¦‚: `style/lip/improve-button-design`
  - ç”¨æ–¼: UI/UX æ”¹é€²ã€CSS èª¿æ•´

- **test**: æ¸¬è©¦ç›¸é—œ
  - ä¾‹å¦‚: `test/lip/add-unit-tests`
  - ç”¨æ–¼: æ–°å¢æˆ–ä¿®æ”¹æ¸¬è©¦

- **chore**: é›œé …ä»»å‹™
  - ä¾‹å¦‚: `chore/lip/update-dependencies`
  - ç”¨æ–¼: ä¾è³´æ›´æ–°ã€å»ºç½®é…ç½®ç­‰

### å‘½ååŸå‰‡

1. **ä½¿ç”¨å°å¯«å­—æ¯**: æ‰€æœ‰åˆ†æ”¯åç¨±ä½¿ç”¨å°å¯«
2. **ä½¿ç”¨é€£å­—ç¬¦**: å–®è©ä¹‹é–“ä½¿ç”¨ `-` é€£æ¥
3. **ç°¡æ½”æ˜ç¢º**: åŠŸèƒ½æè¿°æ‡‰ç°¡çŸ­ä½†å…·æè¿°æ€§
4. **è‹±æ–‡å‘½å**: çµ±ä¸€ä½¿ç”¨è‹±æ–‡å‘½å
5. **é¿å…ç‰¹æ®Šå­—ç¬¦**: åªä½¿ç”¨å­—æ¯ã€æ•¸å­—å’Œé€£å­—ç¬¦

### å¯¦éš›ç¯„ä¾‹

```bash
# âœ… æ­£ç¢ºç¯„ä¾‹
git checkout -b feat/lip/add-language-selector
git checkout -b fix/lip/fix-search-modal-crash
git checkout -b refactor/lip/improve-jotai-structure
git checkout -b docs/lip/update-api-documentation

# âŒ éŒ¯èª¤ç¯„ä¾‹
git checkout -b new-feature              # ç¼ºå°‘é¡å‹å’Œé–‹ç™¼è€…åç¨±
git checkout -b feat/AddFeature          # ä½¿ç”¨å¤§å¯«å­—æ¯
git checkout -b feat/lip/æ–°å¢åŠŸèƒ½     # ä½¿ç”¨ä¸­æ–‡
git checkout -b feat-lip-feature      # æ ¼å¼éŒ¯èª¤
```

## å·¥ä½œæµç¨‹

### 1. å»ºç«‹æ–°åˆ†æ”¯

```bash
# å¾ main åˆ†æ”¯å»ºç«‹æ–°åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b <type>/<name>/<description>
```

### 2. é–‹ç™¼éç¨‹

```bash
# å®šæœŸæäº¤è®Šæ›´
git add .
git commit -m "feat: implement user authentication"

# å®šæœŸåŒæ­¥ä¸»åˆ†æ”¯
git fetch origin main
git rebase origin/main
```

### 3. æº–å‚™åˆä½µ

```bash
# æ¨é€åˆ†æ”¯åˆ°é ç«¯
git push -u origin <branch-name>

# å»ºç«‹ Pull Request
# ä½¿ç”¨ GitHub/GitLab ä»‹é¢å»ºç«‹ PR
```

### 4. åˆä½µå¾Œæ¸…ç†

```bash
# åˆªé™¤æœ¬åœ°åˆ†æ”¯
git branch -d <branch-name>

# åˆªé™¤é ç«¯åˆ†æ”¯
git push origin --delete <branch-name>
```

## æäº¤è¨Šæ¯è¦ç¯„

### æ ¼å¼

```
<type>: <subject>

<body>

<footer>
```

### é¡å‹ (type)

èˆ‡åˆ†æ”¯é¡å‹ç›¸åŒ: `feat`, `fix`, `refactor`, `docs`, `style`, `test`, `chore`

### âš ï¸ é‡è¦ï¼šèªè¨€ä½¿ç”¨è¦ç¯„

**é è¨­ä½¿ç”¨ç¹é«”ä¸­æ–‡æ’°å¯« commit message**

é™¤éæœ‰ç‰¹åˆ¥è¦æ±‚ï¼ˆå¦‚åœ‹éš›å”ä½œå°ˆæ¡ˆï¼‰ï¼Œå¦å‰‡ commit message çš„ subject å’Œ body éƒ½æ‡‰è©²ä½¿ç”¨**ç¹é«”ä¸­æ–‡**æ’°å¯«ã€‚

#### åŸå‰‡

1. **Type ä½¿ç”¨è‹±æ–‡**: `feat`, `fix`, `refactor` ç­‰é¡å‹æ¨™ç±¤ä¿æŒè‹±æ–‡
2. **Subject ä½¿ç”¨ä¸­æ–‡**: ä¸»è¦æè¿°ä½¿ç”¨ç¹é«”ä¸­æ–‡
3. **Body ä½¿ç”¨ä¸­æ–‡**: è©³ç´°èªªæ˜ä½¿ç”¨ç¹é«”ä¸­æ–‡
4. **Footer ä¾æƒ…æ³**: issue ç·¨è™Ÿç­‰å¯ä½¿ç”¨è‹±æ–‡

### ç¯„ä¾‹

```bash
# âœ… æ­£ç¢ºï¼šä½¿ç”¨ä¸­æ–‡
git commit -m "feat: æ–°å¢èªè¨€é¸æ“‡å™¨å…ƒä»¶"

# âœ… æ­£ç¢ºï¼šè©³ç´°æäº¤ä½¿ç”¨ä¸­æ–‡
git commit -m "feat: æ–°å¢èªè¨€é¸æ“‡å™¨å…ƒä»¶

- å¯¦ä½œåŒ…å« 5 ç¨®èªè¨€é¸é …çš„ä¸‹æ‹‰é¸å–®
- æ–°å¢èªè¨€è¨­å®šæŒä¹…åŒ–åˆ° localStorage
- æ›´æ–° i18n é…ç½®

Closes #123"

# âœ… æ­£ç¢ºï¼šä¿®å¾© bug
git commit -m "fix: ä¿®æ­£ç™»å…¥æŒ‰éˆ•é»æ“Šç„¡åæ‡‰çš„å•é¡Œ"

# âœ… æ­£ç¢ºï¼šé‡æ§‹ç¨‹å¼ç¢¼
git commit -m "refactor: é‡æ§‹ Jotai ç‹€æ…‹ç®¡ç†çµæ§‹

- æ‹†åˆ† dataAtoms ç‚ºå¤šå€‹æ¨¡çµ„
- å„ªåŒ– atom å‘½åå’Œçµ„ç¹”
- æ”¹å–„å‹åˆ¥å®šç¾©"

# âŒ éŒ¯èª¤ï¼šä½¿ç”¨è‹±æ–‡ï¼ˆé™¤éæœ‰ç‰¹åˆ¥è¦æ±‚ï¼‰
git commit -m "feat: add language selector component"

# âŒ éŒ¯èª¤ï¼šä¸­è‹±æ··ç”¨ä¸ç•¶
git commit -m "feat: æ–°å¢ language selector å…ƒä»¶"
```

### ç‰¹æ®Šæƒ…æ³

**ä½•æ™‚ä½¿ç”¨è‹±æ–‡ï¼Ÿ**

1. åœ‹éš›å”ä½œå°ˆæ¡ˆæ˜ç¢ºè¦æ±‚
2. é–‹æºå°ˆæ¡ˆçš„åœ‹éš›è²¢ç»
3. åœ˜éšŠç‰¹åˆ¥æŒ‡å®šä½¿ç”¨è‹±æ–‡

**å¦‚æœä¸ç¢ºå®šï¼Œé è¨­ä½¿ç”¨ä¸­æ–‡ã€‚**

## æ³¨æ„äº‹é …

1. **çµ•ä¸ç›´æ¥åœ¨ main åˆ†æ”¯é–‹ç™¼**: æ°¸é å¾ main å»ºç«‹æ–°åˆ†æ”¯
2. **ä¿æŒåˆ†æ”¯ç”Ÿå‘½é€±æœŸçŸ­**: ç›¡å¿«å®Œæˆä¸¦åˆä½µåˆ†æ”¯
3. **å®šæœŸåŒæ­¥ä¸»åˆ†æ”¯**: é¿å…åˆä½µè¡çª
4. **ä½¿ç”¨æœ‰æ„ç¾©çš„åç¨±**: è®“ä»–äººèƒ½ç†è§£åˆ†æ”¯ç›®çš„
5. **ä¸€å€‹åˆ†æ”¯ä¸€å€‹åŠŸèƒ½**: é¿å…åœ¨å–®ä¸€åˆ†æ”¯æ··åˆå¤šå€‹ä¸ç›¸é—œçš„è®Šæ›´

## âš ï¸ é‡è¦ï¼šæ¸¬è©¦èˆ‡æäº¤æµç¨‹

### æ¯æ¬¡ä¿®æ”¹å¾Œå¿…é ˆæ¸¬è©¦

**é€™æ˜¯å¼·åˆ¶æ€§è¦å‰‡ï¼ä»»ä½•ç¨‹å¼ç¢¼ä¿®æ”¹éƒ½å¿…é ˆç«‹å³æ¸¬è©¦ã€‚**

```bash
# ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œï¼Œç«‹å³åŸ·è¡Œæ¸¬è©¦
lsof -ti:3000 | xargs kill -9 2>/dev/null
sleep 2
pnpm dev
```

**æª¢æŸ¥é …ç›®ï¼š**

- âœ… å°ˆæ¡ˆèƒ½å¦æˆåŠŸå•Ÿå‹•
- âœ… ç„¡ç·¨è­¯éŒ¯èª¤
- âœ… åŠŸèƒ½æ­£å¸¸é‹ä½œ
- âœ… ç„¡åŸ·è¡ŒéŒ¯èª¤

### å®Œæˆå¾Œçš„æäº¤æµç¨‹

**âš ï¸ çµ•ä¸ç›´æ¥æ¨é€ï¼å¿…é ˆç­‰å¾…ä½¿ç”¨è€…ç¢ºèªã€‚**

```bash
# 1. æäº¤åˆ°æœ¬åœ°åˆ†æ”¯
git add .
git commit -m "type: description"

# 2. â¸ï¸ åœæ­¢ï¼å‘ŠçŸ¥ä½¿ç”¨è€…å·²å®Œæˆ
# èªªæ˜ï¼šã€Œä¿®æ”¹å·²å®Œæˆä¸¦æ¸¬è©¦é€šéï¼Œè«‹æª¢æŸ¥å¾Œå†æ¨é€ã€

# 3. â¸ï¸ ç­‰å¾…ä½¿ç”¨è€…æª¢æŸ¥ç¢ºèª

# 4. âœ… ä½¿ç”¨è€…ç¢ºèªå¾Œæ‰æ¨é€
git push origin branch-name
```

### æ¨é€å‰æœ€çµ‚æª¢æŸ¥æ¸…å–®

- [ ] æ‰€æœ‰ä¿®æ”¹éƒ½å·²æ¸¬è©¦é€šé
- [ ] å®Œæ•´åŠŸèƒ½æ¸¬è©¦å·²å®Œæˆ
- [ ] ç„¡ç·¨è­¯éŒ¯èª¤å’ŒåŸ·è¡ŒéŒ¯èª¤
- [ ] è®Šæ›´å·²æäº¤åˆ°æœ¬åœ°
- [ ] **å·²é€šçŸ¥ä½¿ç”¨è€…æª¢æŸ¥**
- [ ] **ç­‰å¾…ä½¿ç”¨è€…ç¢ºèª**
- [ ] ç¢ºèªå¾Œæ‰åŸ·è¡Œ push

### éŒ¯èª¤ç¤ºç¯„ vs æ­£ç¢ºç¤ºç¯„

```bash
# âŒ éŒ¯èª¤ï¼šç›´æ¥æ¨é€
git add .
git commit -m "feat: add feature"
git push origin feature-branch  # éŒ¯èª¤ï¼æœªç¶“ç¢ºèªå°±æ¨é€

# âœ… æ­£ç¢ºï¼šç­‰å¾…ç¢ºèª
git add .
git commit -m "feat: add feature"
# å‘ŠçŸ¥ä½¿ç”¨è€…ï¼šã€Œä¿®æ”¹å®Œæˆï¼Œå·²æ¸¬è©¦é€šéï¼Œè«‹æª¢æŸ¥ã€
# ç­‰å¾…ä½¿ç”¨è€…å›è¦†ç¢ºèª
# æ”¶åˆ°ç¢ºèªå¾Œæ‰åŸ·è¡Œï¼š
git push origin feature-branch
```

## å¸¸è¦‹å•é¡Œ

### Q: å¦‚ä½•è™•ç†é•·æœŸé–‹ç™¼çš„åŠŸèƒ½ï¼Ÿ

A: å»ºç«‹ feature åˆ†æ”¯ï¼Œå®šæœŸå¾ main rebaseï¼Œå®Œæˆå¾Œå†åˆä½µã€‚

### Q: å¯ä»¥åœ¨åˆ†æ”¯åç¨±ä¸­ä½¿ç”¨ issue ç·¨è™Ÿå—ï¼Ÿ

A: å¯ä»¥ï¼Œæ ¼å¼: `feat/ponpon/add-feature-#123`

### Q: å¦‚ä½•è™•ç†ç·Šæ€¥ä¿®å¾©ï¼Ÿ

A: ä½¿ç”¨ `hotfix` é¡å‹: `hotfix/ponpon/critical-bug-fix`

### Q: ç‚ºä»€éº¼ä¸èƒ½ç›´æ¥æ¨é€ï¼Ÿ

A: ä½¿ç”¨è€…éœ€è¦åœ¨æœ¬åœ°ç’°å¢ƒæª¢æŸ¥åŠŸèƒ½ã€æ¸¬è©¦æ•ˆæœã€ç¢ºèªç„¡èª¤å¾Œæ‰èƒ½æ¨é€åˆ°é ç«¯ã€‚é€™å¯ä»¥é˜²æ­¢å°‡å•é¡Œç¨‹å¼ç¢¼æ¨é€åˆ°é ç«¯å„²å­˜åº«ã€‚

### Q: æ¯æ¬¡ä¿®æ”¹éƒ½è¦æ¸¬è©¦å—ï¼Ÿ

A: æ˜¯çš„ï¼Œçµ•å°éœ€è¦ï¼ä»»ä½•ç¨‹å¼ç¢¼ä¿®æ”¹ï¼ˆç„¡è«–å¤§å°ï¼‰éƒ½å¿…é ˆç«‹å³æ¸¬è©¦ï¼Œç¢ºä¿æ²’æœ‰ç ´å£ç¾æœ‰åŠŸèƒ½ã€‚

## åƒè€ƒè³‡æº

- [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
